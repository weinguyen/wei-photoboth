<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>‚ú® Wei PhotoBooth Pro ‚ú®</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Wei PhotoBooth">
    <link rel="manifest" href="manifest.json">

    <!-- Prevent zoom on inputs -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>
    <!-- Magic Particles Background (Reduced) -->
    <div class="magic-bg">
        <div class="sparkles" id="sparkles"></div>
        <div class="floating-hearts"></div>
    </div>

    <!-- Header with reduced effects -->
    <header class="header">
        <div class="header-content">
            <h1 class="logo">
                <span class="logo-icon">
                    <i class="fas fa-camera"></i>
                </span>
                <span class="logo-text">
                    Wei PhotoBooth
                    <span class="pro-badge">PRO</span>
                </span>
            </h1>
            <p class="tagline">
                <span class="tagline-text">Ch·ª•p ·∫£nh & quay video ƒë·∫πp v·ªõi hi·ªáu ·ª©ng ma thu·∫≠t!</span>
            </p>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Camera Section -->
        <div class="camera-section glass-card" id="cameraSection">
            <div class="camera-container">
                <div class="camera-frame">
                    <video id="video" autoplay muted playsinline></video>
                    <canvas id="canvas" style="display: none;"></canvas>

                    <!-- Camera Overlay -->
                    <div class="camera-overlay">
                        <div class="frame-effect">
                            <div class="corner corner-tl"></div>
                            <div class="corner corner-tr"></div>
                            <div class="corner corner-bl"></div>
                            <div class="corner corner-br"></div>
                        </div>
                        <div class="countdown" id="countdown"></div>
                        <div class="capture-flash" id="captureFlash"></div>

                        <!-- Recording Indicator -->
                        <div class="recording-indicator" id="recordingIndicator">
                            <div class="rec-dot"></div>
                            <span class="rec-text">REC</span>
                            <span class="rec-time" id="recordingTime">00:00</span>
                        </div>

                        <!-- Auto Capture Progress -->
                        <div class="auto-capture-progress" id="autoCaptureProgress">
                            <div class="progress-info">
                                <span class="current-shot">1</span>/<span class="total-shots">5</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Camera Controls -->
                <div class="camera-controls">
                    <button class="btn btn-secondary magic-btn" id="switchCamera">
                        <div class="btn-content">
                            <i class="fas fa-sync-alt"></i>
                            <span>ƒê·ªïi Camera</span>
                        </div>
                    </button>

                    <!-- Auto Capture Controls -->
                    <div class="auto-capture-controls">
                        <label for="photoCount">S·ªë ·∫£nh:</label>
                        <select id="photoCount" class="photo-count-select">
                            <option value="1">1 ·∫£nh</option>
                            <option value="3">3 ·∫£nh</option>
                            <option value="5" selected>5 ·∫£nh</option>
                            <option value="10">10 ·∫£nh</option>
                        </select>
                        <button class="btn btn-info magic-btn" id="autoCaptureBtn">
                            <div class="btn-content">
                                <i class="fas fa-camera-retro"></i>
                                <span>Ch·ª•p Li√™n Ti·∫øp</span>
                            </div>
                        </button>
                    </div>

                    <button class="btn btn-primary capture-btn magic-btn" id="captureBtn">
                        <div class="btn-content">
                            <div class="capture-icon">
                                <i class="fas fa-camera"></i>
                            </div>
                            <span>Ch·ª•p ·∫¢nh</span>
                        </div>
                    </button>

                    <!-- Video Recording Button -->
                    <button class="btn btn-danger magic-btn" id="recordBtn">
                        <div class="btn-content">
                            <i class="fas fa-video"></i>
                            <span>Quay Video</span>
                        </div>
                    </button>

                    <button class="btn btn-secondary magic-btn" id="effectsToggle">
                        <div class="btn-content">
                            <i class="fas fa-magic"></i>
                            <span>Hi·ªáu ·ª®ng</span>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Effects Panel -->
            <div class="effects-panel glass-panel" id="effectsPanel">
                <div class="panel-header">
                    <h3><i class="fas fa-palette"></i> Hi·ªáu ·ª®ng</h3>
                </div>
                <div class="effects-grid">
                    <button class="effect-btn glass-btn active" data-effect="none">
                        <div class="effect-icon"><i class="fas fa-times"></i></div>
                        <span>G·ªëc</span>
                    </button>
                    <button class="effect-btn glass-btn" data-effect="vintage">
                        <div class="effect-icon"><i class="fas fa-film"></i></div>
                        <span>Vintage</span>
                    </button>
                    <button class="effect-btn glass-btn" data-effect="bw">
                        <div class="effect-icon"><i class="fas fa-adjust"></i></div>
                        <span>ƒêen Tr·∫Øng</span>
                    </button>
                    <button class="effect-btn glass-btn" data-effect="sepia">
                        <div class="effect-icon"><i class="fas fa-sun"></i></div>
                        <span>Sepia</span>
                    </button>
                    <button class="effect-btn glass-btn" data-effect="neon">
                        <div class="effect-icon"><i class="fas fa-bolt"></i></div>
                        <span>Neon</span>
                    </button>
                    <button class="effect-btn glass-btn" data-effect="rainbow">
                        <div class="effect-icon"><i class="fas fa-rainbow"></i></div>
                        <span>C·∫ßu V·ªìng</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Enhanced Gallery Section -->
        <div class="gallery-section glass-card" id="gallerySection">
            <div class="gallery-header">
                <h2>
                    <i class="fas fa-images"></i>
                    <span>B·ªô S∆∞u T·∫≠p</span>
                </h2>
                <div class="gallery-controls">
                    <div class="view-controls">
                        <button class="view-btn active" data-view="grid" title="L∆∞·ªõi">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-btn" data-view="list" title="Danh s√°ch">
                            <i class="fas fa-list"></i>
                        </button>
                        <button class="view-btn" data-view="masonry" title="G·∫°ch">
                            <i class="fas fa-th-large"></i>
                        </button>
                    </div>
                    <div class="gallery-stats">
                        <span class="media-count">0 file</span>
                    </div>
                    <button class="btn btn-danger btn-sm" id="clearGallery">
                        <i class="fas fa-trash"></i>
                        <span>X√≥a T·∫•t C·∫£</span>
                    </button>
                </div>
            </div>

            <div class="gallery-container">
                <div class="gallery-grid" id="galleryGrid">
                    <div class="empty-gallery">
                        <div class="empty-icon">
                            <i class="fas fa-camera"></i>
                        </div>
                        <p>Ch∆∞a c√≥ ·∫£nh ho·∫∑c video n√†o.<br>H√£y ch·ª•p ·∫£nh ho·∫∑c quay video ƒë·∫ßu ti√™n!</p>
                        <div class="empty-arrow">üëÜ</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Photo Flying Animation Container -->
    <div class="flying-photo-container" id="flyingPhotoContainer"></div>

    <!-- Enhanced Photo Editor Modal -->
    <div class="modal magical-modal" id="editorModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content glass-card">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-magic"></i>
                    <span>Ch·ªânh S·ª≠a ·∫¢nh</span>
                </h2>
                <button class="close-btn" id="closeEditor">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="editor-content">
                <div class="editor-preview">
                    <div class="canvas-container">
                        <canvas id="editorCanvas"></canvas>
                    </div>
                </div>

                <div class="editor-controls glass-panel">
                    <!-- Sticker Section will be created dynamically -->

                    <!-- Filters Tab -->
                    <div class="tab-content" id="filtersTab">
                        <div class="section-header">
                            <h3><i class="fas fa-filter"></i> B·ªô L·ªçc</h3>
                        </div>
                        <div class="filters-grid">
                            <button class="filter-btn glass-btn active" data-filter="none">
                                <div class="filter-preview original"></div>
                                <span>G·ªëc</span>
                            </button>
                            <button class="filter-btn glass-btn" data-filter="vintage">
                                <div class="filter-preview vintage"></div>
                                <span>Vintage</span>
                            </button>
                            <button class="filter-btn glass-btn" data-filter="bw">
                                <div class="filter-preview bw"></div>
                                <span>ƒêen Tr·∫Øng</span>
                            </button>
                            <button class="filter-btn glass-btn" data-filter="sepia">
                                <div class="filter-preview sepia"></div>
                                <span>Sepia</span>
                            </button>
                            <button class="filter-btn glass-btn" data-filter="cool">
                                <div class="filter-preview cool"></div>
                                <span>L·∫°nh</span>
                            </button>
                            <button class="filter-btn glass-btn" data-filter="warm">
                                <div class="filter-preview warm"></div>
                                <span>·∫§m</span>
                            </button>
                            <button class="filter-btn glass-btn" data-filter="dramatic">
                                <div class="filter-preview dramatic"></div>
                                <span>K·ªãch T√≠nh</span>
                            </button>
                            <button class="filter-btn glass-btn" data-filter="dream">
                                <div class="filter-preview dream"></div>
                                <span>M∆° M·ªông</span>
                            </button>
                        </div>
                    </div>

                    <!-- Adjustments -->
                    <div class="adjustments-section">
                        <div class="section-header">
                            <h3><i class="fas fa-sliders-h"></i> ƒêi·ªÅu Ch·ªânh</h3>
                        </div>
                        <div class="slider-group">
                            <label><i class="fas fa-sun"></i> ƒê·ªô S√°ng</label>
                            <div class="slider-container">
                                <input type="range" id="brightness" min="-100" max="100" value="0" class="magic-slider">
                            </div>
                        </div>
                        <div class="slider-group">
                            <label><i class="fas fa-adjust"></i> ƒê·ªô T∆∞∆°ng Ph·∫£n</label>
                            <div class="slider-container">
                                <input type="range" id="contrast" min="-100" max="100" value="0" class="magic-slider">
                            </div>
                        </div>
                        <div class="slider-group">
                            <label><i class="fas fa-palette"></i> ƒê·ªô B√£o H√≤a</label>
                            <div class="slider-container">
                                <input type="range" id="saturation" min="-100" max="100" value="0" class="magic-slider">
                            </div>
                        </div>
                    </div>

                    <!-- Background Section -->
                    <div class="background-section">
                        <div class="section-header">
                            <h3><i class="fas fa-image"></i> N·ªÅn</h3>
                        </div>
                        <div class="background-grid">
                            <button class="bg-btn glass-btn active" data-bg="none">
                                <div class="bg-preview transparent"></div>
                                <span>G·ªëc</span>
                            </button>
                            <button class="bg-btn glass-btn" data-bg="galaxy">
                                <div class="bg-preview galaxy"></div>
                                <span>Thi√™n H√†</span>
                            </button>
                            <button class="bg-btn glass-btn" data-bg="aurora">
                                <div class="bg-preview aurora"></div>
                                <span>C·ª±c Quang</span>
                            </button>
                            <button class="bg-btn glass-btn" data-bg="sunset">
                                <div class="bg-preview sunset"></div>
                                <span>Ho√†ng H√¥n</span>
                            </button>
                            <button class="bg-btn glass-btn" data-bg="ocean">
                                <div class="bg-preview ocean"></div>
                                <span>ƒê·∫°i D∆∞∆°ng</span>
                            </button>
                            <button class="bg-btn glass-btn" data-bg="forest">
                                <div class="bg-preview forest"></div>
                                <span>R·ª´ng</span>
                            </button>
                        </div>
                        <div class="custom-bg-upload">
                            <input type="file" id="customBg" accept="image/*">
                            <label for="customBg" class="btn btn-secondary btn-sm">
                                <i class="fas fa-upload"></i>
                                <span>T·∫£i N·ªÅn</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" id="resetEditor">
                    <i class="fas fa-undo"></i>
                    <span>L√†m L·∫°i</span>
                </button>
                <button class="btn btn-success" id="saveEdit">
                    <i class="fas fa-save"></i>
                    <span>L∆∞u ·∫¢nh</span>
                </button>
                <button class="btn btn-primary" id="downloadEdit">
                    <i class="fas fa-download"></i>
                    <span>T·∫£i Xu·ªëng</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Video Preview Modal -->
    <div class="modal magical-modal" id="videoModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content glass-card">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-video"></i>
                    <span>Xem Video</span>
                </h2>
                <button class="close-btn" id="closeVideoModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="video-preview-content">
                <video id="videoPreview" controls></video>
            </div>

            <div class="modal-footer">
                <button class="btn btn-primary" id="downloadVideo">
                    <i class="fas fa-download"></i>
                    <span>T·∫£i Video</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div class="loading magical-loading" id="loading">
        <div class="loading-content">
            <div class="magic-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-center">‚ú®</div>
            </div>
            <p class="loading-text">ƒêang x·ª≠ l√Ω...</p>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast magical-toast" id="toast">
        <div class="toast-icon">
            <i class="fas fa-magic"></i>
        </div>
        <div class="toast-content">
            <span class="toast-message">Th√†nh c√¥ng!</span>
        </div>
    </div>

    <!-- Help Button -->
    <button class="floating-help-btn" onclick="document.getElementById('helpModal').classList.add('active')"
        title="H∆∞·ªõng d·∫´n">
        <i class="fas fa-question"></i>
    </button>

    <!-- Help Modal -->
    <div class="modal magical-modal" id="helpModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content glass-card">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-question-circle"></i>
                    <span>H∆∞·ªõng D·∫´n</span>
                </h2>
                <button class="close-btn" onclick="document.getElementById('helpModal').classList.remove('active')">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="help-content">
                <div class="help-section">
                    <h3><i class="fas fa-camera"></i> Ch·ª•p ·∫¢nh</h3>
                    <ul>
                        <li>Nh·∫•n "Ch·ª•p ·∫¢nh" ƒë·ªÉ ch·ª•p 1 ·∫£nh</li>
                        <li>Ch·ªçn s·ªë ·∫£nh v√† nh·∫•n "Ch·ª•p Li√™n Ti·∫øp" ƒë·ªÉ ch·ª•p t·ª± ƒë·ªông</li>
                        <li>ƒê·∫øm ng∆∞·ª£c 3-2-1 tr∆∞·ªõc khi ch·ª•p</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3><i class="fas fa-video"></i> Quay Video</h3>
                    <ul>
                        <li>Nh·∫•n "Quay Video" ƒë·ªÉ b·∫Øt ƒë·∫ßu quay</li>
                        <li>Nh·∫•n l·∫°i ƒë·ªÉ d·ª´ng quay</li>
                        <li>Video s·∫Ω ƒë∆∞·ª£c l∆∞u t·ª± ƒë·ªông</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3><i class="fas fa-edit"></i> Ch·ªânh S·ª≠a</h3>
                    <ul>
                        <li>Nh·∫•n v√†o ·∫£nh ƒë·ªÉ ch·ªânh s·ª≠a</li>
                        <li>Th√™m sticker, √°p d·ª•ng filter</li>
                        <li>ƒêi·ªÅu ch·ªânh m√†u s·∫Øc v√† thay n·ªÅn</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>